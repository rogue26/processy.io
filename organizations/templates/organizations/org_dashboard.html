{% extends 'base.html' %}

{% block content %}

{% load widget_tweaks %}


<div class="container-fluid">
    <div class="row mt-4 mb-3">
        <div class="col-md-3 pl-5">
            <h4 class="mb-3">Organization info</h4>
            <div>
                <h6><strong>Organization name:</strong></br>{{organization.name}} ({{organization.nickname}})</h6>
            </div>
            <div>
                <h6><strong>Domain:</strong></br>{{organization.domain}}</h6>
            </div>
            <div class="row mb-3 mt-3">
                <div class="col-md-12">
                    <button id="configure-organization" class="btn btn-secondary text-left btn-block" type="button" name="button"
                            style="active">
                        <span class="fa fa-gear mr-2"></span>Configure Organization
                    </button>
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-md-12">
                    <button id="add-division" class="btn btn-secondary text-left btn-block" type="button" name="button"
                            style="active">
                        <span class="fa fa-sitemap mr-2"></span>Add division
                    </button>
                </div>
            </div>
        </div>
        <div class="col-md-9">
            <div class="row">
                <div class="col-md-12">
                    <h4 class="mb-3">Organization projects</h4>
                    {% if projects %}
                    {% include "projects/_projects_table.html" %}
                    {% else %}
                    <p class="no-projects text-primary">No projects added yet.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock content %}

{% block extrascripts %}
<script type="text/javascript">

      $(function () {

        function codeAddress() {
            alert('ok')
        }
        window.onload = codeAddress;



            // Log in & Sign up buttons
          // The formURL is given explicitly
          $("#login-btn").modalForm({
            formURL: "{% url 'login_modal' %}"
          });

          $("#signup-btn").modalForm({
            formURL: "{% url 'signup_modal' %}"
          });

        // Create division button opens modal with id="create-modal"
          $("#add-division").modalForm({
            formURL: "{% url 'add_division' organization_id=organization.id %}",
            modalID: "#create-modal"
          });

          var asyncSuccessMessage = [
            "<div ",
            "style='position:fixed;top:0;z-index:10000;width:100%;border-radius:0;' ",
            "class='alert alert-icon alert-success alert-dismissible fade show mb-0' role='alert'>",
            "Success: Updated.",
            "<button type='button' class='close' data-dismiss='alert' aria-label='Close'>",
            "<span aria-hidden='true'>&times;</span>",
            "</button>",
            "</div>",
            "<script>",
            "$('.alert').fadeTo(2000, 500).slideUp(500, function () {$('.alert').slideUp(500).remove();});",
            "<\/script>"
          ].join("");


          // Read and Delete buttons open modal with id="modal"
          // The formURL is retrieved from the data of the element
          $(".bs-modal").each(function () {
              $(this).modalForm({formURL: $(this).data("form-url")});
          });

          // Hide message
          $(".alert").fadeTo(2000, 500).slideUp(500, function () {
              $(".alert").slideUp(500);
          });

      });








</script>
{% endblock extrascripts %}
